@page "/teacheroverview/{userId}"

@using System.Net.Http
@using System.Net.Http.Json
@using System.Text.Json
@inject HttpClient Http

<h3>Teacher Overview</h3>

@if (teacher != null)
{
    <p><strong>Teacher Information:</strong></p>
    <p><strong>User ID:</strong> @teacher.Id</p>
    <p><strong>User Name:</strong> @teacher.UserName</p>
    <p><strong>First Name:</strong> @teacher.FirstName</p>
    <p><strong>Last Name:</strong> @teacher.LastName</p>
    <p><strong>Full Name:</strong> @teacher.FullName</p>
    <p><strong>Course ID:</strong> @teacher.CourseId</p>
}
else
{
    <p>Loading or Error occurred.</p>
}

@code {
    [Parameter]
    public string UserId { get; set; }
    private TeacherDTO teacher;

    protected override async Task OnInitializedAsync()
    {
        try
        {
            var httpClient = new HttpClient();
            teacher = await httpClient.GetFromJsonAsync<TeacherDTO>($"https://localhost:7050/api/teacheroverview/{UserId}");
        }
        catch (Exception ex)
        {
            // Log or handle the exception
            Console.WriteLine($"Error: {ex.Message}");
            // You can set teacher to null or handle the error state in another way
            teacher = null;
        }
    }
}